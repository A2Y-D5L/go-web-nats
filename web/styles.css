:root {
  color-scheme: light dark;

  --font-sans: "Sofia Pro", "Avenir Next", "Segoe UI", "Trebuchet MS", sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", Menlo, monospace;

  --bg-canvas: #f4f7f6;
  --bg-surface: #ffffff;
  --bg-subtle: #eef4f1;
  --bg-hero: linear-gradient(145deg, #123630, #1c4a41 55%, #205349);

  --text-primary: #18302a;
  --text-secondary: #3b5550;
  --text-muted: #5d7470;
  --text-hero: #e9f8f4;

  --border-soft: #d4e0db;
  --border-strong: #b8c9c2;

  --accent: #127e6d;
  --accent-strong: #0f6659;
  --accent-soft: #daf4ed;

  --info-soft: #eaf4ff;
  --ok-soft: #e8f7ed;
  --warn-soft: #fff6e5;
  --danger-soft: #ffedea;

  --shadow-soft: 0 6px 18px rgba(17, 45, 38, 0.06);
  --shadow-card: 0 14px 38px rgba(13, 35, 29, 0.09);

  --radius-sm: 0.55rem;
  --radius-md: 0.85rem;
  --radius-lg: 1.1rem;

  --space-1: 0.35rem;
  --space-2: 0.6rem;
  --space-3: 0.9rem;
  --space-4: 1.2rem;
  --space-5: 1.6rem;
  --space-6: 2rem;

  --motion-fast: 140ms;
  --motion-mid: 240ms;
  --ease-standard: cubic-bezier(0.2, 0, 0, 1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-canvas: #101917;
    --bg-surface: #14211e;
    --bg-subtle: #1a2b27;
    --bg-hero: linear-gradient(145deg, #0f2b25, #163932 52%, #1a443a);

    --text-primary: #e1efea;
    --text-secondary: #b8cfca;
    --text-muted: #90aaa4;
    --text-hero: #d9f2ec;

    --border-soft: #2b3f3a;
    --border-strong: #3a524c;

    --accent: #39b59c;
    --accent-strong: #2f9a85;
    --accent-soft: #1f3a33;

    --info-soft: #1d3042;
    --ok-soft: #1f3a2b;
    --warn-soft: #3b321f;
    --danger-soft: #3f2624;

    --shadow-soft: none;
    --shadow-card: none;
  }
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  font-family: var(--font-sans);
  line-height: 1.45;
  background:
    radial-gradient(circle at 14% -14%, rgba(94, 169, 148, 0.2), transparent 36%),
    radial-gradient(circle at 92% -10%, rgba(95, 153, 193, 0.18), transparent 33%),
    var(--bg-canvas);
  color: var(--text-primary);
}

h1,
h2,
h3,
p {
  margin: 0;
}

code,
pre,
textarea {
  font-family: var(--font-mono);
}

button,
input,
select,
textarea {
  font: inherit;
  color: inherit;
}

input,
select,
textarea {
  width: 100%;
  border: 1px solid var(--border-strong);
  border-radius: var(--radius-md);
  background: var(--bg-surface);
  transition:
    border-color var(--motion-fast) var(--ease-standard),
    box-shadow var(--motion-fast) var(--ease-standard);
}

input,
select {
  padding: 0.56rem 0.72rem;
}

textarea {
  min-height: 7rem;
  resize: vertical;
  padding: 0.7rem 0.76rem;
  line-height: 1.35;
}

input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 24%, transparent);
}

.app-shell {
  width: min(1220px, calc(100vw - 1.4rem));
  margin: var(--space-5) auto var(--space-6);
  display: grid;
  gap: var(--space-4);
}

.catalog-hero {
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-4) var(--space-5);
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: var(--space-3);
  box-shadow: var(--shadow-soft);
}

.catalog-hero h1 {
  font-size: clamp(1.3rem, 2.4vw, 1.95rem);
  line-height: 1.2;
}

.catalog-actions {
  display: inline-flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.hero {
  background: var(--bg-hero);
  color: var(--text-hero);
  border: 1px solid color-mix(in srgb, var(--border-soft) 55%, transparent);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  display: grid;
  gap: var(--space-3);
  box-shadow: var(--shadow-card);
}

.hero-eyebrow {
  font-size: 0.74rem;
  letter-spacing: 0.11em;
  text-transform: uppercase;
  opacity: 0.85;
}

.hero h1 {
  font-size: clamp(1.55rem, 3vw, 2.25rem);
  line-height: 1.14;
}

.hero-subtitle {
  max-width: 64ch;
  color: color-mix(in srgb, var(--text-hero) 90%, transparent);
}

.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.hero-chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.chip {
  font-size: 0.76rem;
  border-radius: 999px;
  border: 1px solid rgba(189, 220, 212, 0.36);
  background: rgba(122, 176, 162, 0.18);
  padding: 0.32rem 0.62rem;
}

.journey {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--space-3);
}

.journey-card {
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  display: grid;
  gap: var(--space-2);
  box-shadow: var(--shadow-soft);
}

.journey-step {
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 0.72rem;
  font-weight: 700;
}

.journey-card h2 {
  font-size: 1.06rem;
  line-height: 1.28;
}

.journey-card p {
  color: var(--text-secondary);
  line-height: 1.45;
}

.system-strip {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: var(--space-2);
}

.metric-card {
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  display: grid;
  gap: var(--space-1);
}

.metric-label {
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
  font-size: 0.7rem;
}

.metric-value {
  font-size: 1.08rem;
  font-weight: 700;
}

.metric-meta {
  font-size: 0.82rem;
  color: var(--text-secondary);
  line-height: 1.35;
}

.status-banner {
  min-height: 2.4rem;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  padding: 0.62rem 0.82rem;
  display: flex;
  align-items: center;
  color: var(--text-secondary);
}

.status-banner.empty {
  display: none;
}

.status-banner.tone-info {
  background: var(--info-soft);
}

.status-banner.tone-success {
  background: var(--ok-soft);
}

.status-banner.tone-warning {
  background: var(--warn-soft);
}

.status-banner.tone-error {
  background: var(--danger-soft);
}

.workspace {
  display: grid;
  grid-template-columns: minmax(280px, 32%) minmax(0, 68%);
  gap: var(--space-3);
  align-items: start;
}

.panel {
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  box-shadow: var(--shadow-soft);
  min-width: 0;
}

.panel-projects {
  position: sticky;
  top: var(--space-3);
  max-height: calc(100vh - 2.8rem);
  overflow: auto;
}

.panel-main {
  display: grid;
  gap: var(--space-3);
}

.selected-actions {
  display: inline-flex;
  gap: var(--space-1);
  flex-wrap: wrap;
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

.panel-header.compact-header {
  margin-bottom: var(--space-2);
}

.panel-header h2,
.panel-header h3 {
  font-size: 1.02rem;
  line-height: 1.3;
}

.filter-grid {
  display: grid;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.field {
  display: grid;
  gap: 0.3rem;
}

.field > span {
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--text-muted);
}

.helper-text {
  color: var(--text-muted);
  font-size: 0.82rem;
  line-height: 1.4;
}

.project-list {
  display: grid;
  gap: var(--space-2);
  max-height: 64vh;
  overflow: auto;
}

.project-item {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: 0.64rem 0.7rem;
  display: grid;
  gap: 0.24rem;
  cursor: pointer;
  background: var(--bg-surface);
  transition:
    transform var(--motion-fast) var(--ease-standard),
    border-color var(--motion-fast) var(--ease-standard),
    background var(--motion-fast) var(--ease-standard);
}

.project-item:hover {
  transform: translateY(-1px);
  border-color: var(--accent);
}

.project-item.selected {
  border-color: var(--accent);
  background: color-mix(in srgb, var(--accent-soft) 78%, transparent);
}

.project-title-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2);
}

.project-title {
  font-weight: 650;
}

.project-meta {
  color: var(--text-muted);
  font-size: 0.78rem;
  line-height: 1.28;
}

.project-meta.emphasis {
  color: var(--text-secondary);
}

.subpanel {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  background: color-mix(in srgb, var(--bg-subtle) 35%, transparent);
  display: grid;
  gap: var(--space-2);
}

.subpanel h2 {
  font-size: 1.05rem;
  letter-spacing: 0.01em;
  line-height: 1.28;
}

.subpanel-copy {
  color: var(--text-secondary);
  font-size: 0.9rem;
  line-height: 1.45;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-2) var(--space-3);
}

.field-full {
  grid-column: 1 / -1;
}

.env-builder {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  padding: var(--space-2);
  display: grid;
  gap: var(--space-2);
}

.env-builder-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.env-builder-title {
  font-size: 0.86rem;
  font-weight: 700;
  color: var(--text-secondary);
}

.env-builder-actions {
  display: inline-flex;
  gap: var(--space-1);
  flex-wrap: wrap;
}

.env-list {
  display: grid;
  gap: var(--space-2);
}

.env-card {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: color-mix(in srgb, var(--bg-subtle) 38%, transparent);
  padding: var(--space-2);
  display: grid;
  gap: var(--space-2);
}

.env-card-head {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-2);
  align-items: end;
}

.env-vars-list {
  display: grid;
  gap: var(--space-1);
}

.env-var-row {
  display: grid;
  grid-template-columns: minmax(120px, 0.75fr) minmax(160px, 1fr) auto auto;
  gap: var(--space-1);
  align-items: end;
}

.env-var-row input {
  font-family: var(--font-mono);
  font-size: 0.82rem;
}

.env-card-actions {
  display: flex;
  justify-content: flex-start;
}

.env-empty {
  border: 1px dashed var(--border-strong);
  border-radius: var(--radius-sm);
  background: var(--bg-subtle);
  padding: var(--space-2);
  color: var(--text-secondary);
  font-size: 0.82rem;
}

.advanced-details,
.workspace-action {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
}

.advanced-details {
  padding: 0.15rem 0.55rem 0.55rem;
}

.workspace-action {
  padding: 0.2rem 0.62rem 0.62rem;
}

.advanced-details > summary,
.workspace-action > summary {
  cursor: pointer;
  color: var(--text-secondary);
  font-size: 0.86rem;
  padding: 0.45rem 0;
  font-weight: 600;
}

.advanced-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-2) var(--space-3);
  margin-top: var(--space-2);
}

.project-summary {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  background: var(--bg-surface);
  padding: var(--space-3);
  display: grid;
  gap: var(--space-2);
}

.project-summary-row {
  display: flex;
  justify-content: space-between;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.danger-zone {
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in srgb, #d66658 45%, var(--border-soft));
  background: var(--danger-soft);
  padding: var(--space-2);
  display: grid;
  gap: var(--space-2);
}

.runtime-shell {
  gap: var(--space-3);
}

.runtime-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.runtime-toggle {
  display: inline-flex;
  gap: var(--space-1);
}

.runtime-panel.is-hidden {
  display: none;
}

.timeline {
  display: grid;
  gap: var(--space-2);
}

.timeline-step {
  border: 1px solid var(--border-soft);
  border-left-width: 4px;
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  padding: 0.62rem 0.7rem;
  display: grid;
  gap: 0.16rem;
  animation: stepReveal var(--motion-mid) var(--ease-standard);
}

.timeline-step-head {
  display: flex;
  justify-content: space-between;
  gap: var(--space-2);
  align-items: center;
}

.timeline-step-title {
  font-weight: 650;
  line-height: 1.25;
}

.timeline-step-meta,
.timeline-step-artifacts {
  color: var(--text-secondary);
  font-size: 0.81rem;
  line-height: 1.36;
}

.timeline-step--pending {
  border-left-color: #809d94;
}

.timeline-step--running {
  border-left-color: #2d83bf;
  background: var(--info-soft);
}

.timeline-step--done {
  border-left-color: #3c9f68;
  background: var(--ok-soft);
}

.timeline-step--error {
  border-left-color: #c64f44;
  background: var(--danger-soft);
}

.op-progress-card {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  padding: var(--space-2);
  display: grid;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.op-progress-head {
  display: flex;
  justify-content: space-between;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.op-progress-title {
  color: var(--text-secondary);
  font-size: 0.85rem;
}

.progress-track {
  height: 0.5rem;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-soft) 62%, transparent);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--accent), var(--accent-strong));
  transition: width var(--motion-mid) var(--ease-standard);
}

.progress-fill.error {
  background: linear-gradient(90deg, #d4614f, #b83c31);
}

.phase-badge {
  border-radius: 999px;
  border: 1px solid transparent;
  padding: 0.15rem 0.5rem;
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-weight: 700;
}

.phase-ready,
.phase-done {
  background: var(--ok-soft);
  color: #2a8155;
}

.phase-reconciling,
.phase-running {
  background: var(--info-soft);
  color: #2a6f9e;
}

.phase-deleting,
.phase-warning {
  background: var(--warn-soft);
  color: #8c6116;
}

.phase-error {
  background: var(--danger-soft);
  color: #9f3a32;
}

.phase-queued,
.phase-pending,
.phase-unknown {
  background: var(--bg-subtle);
  color: var(--text-secondary);
}

.insight-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.insight-card {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  padding: var(--space-2);
  display: grid;
  gap: 0.22rem;
}

.insight-label {
  font-size: 0.7rem;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--text-muted);
}

.insight-value {
  font-weight: 650;
}

.insight-meta {
  color: var(--text-secondary);
  font-size: 0.8rem;
}

.raw-details {
  border-top: 1px dashed var(--border-strong);
  padding-top: var(--space-2);
}

.raw-details summary {
  cursor: pointer;
  color: var(--text-secondary);
  font-size: 0.84rem;
}

.codeblock {
  margin-top: var(--space-2);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  color: var(--text-secondary);
  padding: var(--space-2);
  min-height: 6rem;
  max-height: 20rem;
  overflow: auto;
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.4;
  font-size: 0.8rem;
}

.artifact-list {
  display: grid;
  gap: var(--space-2);
  max-height: 15rem;
  overflow: auto;
}

.artifact-row {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  background: var(--bg-surface);
  padding: 0.48rem 0.58rem;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: var(--space-2);
  align-items: center;
}

.artifact-row.selected {
  border-color: var(--accent);
  background: color-mix(in srgb, var(--accent-soft) 75%, transparent);
}

.artifact-link {
  text-decoration: none;
  color: inherit;
  min-width: 0;
}

.artifact-path {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 0.82rem;
}

.artifact-kind {
  display: block;
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--text-muted);
}

.preview-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.buildkit-signal {
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-sm);
  padding: 0.5rem 0.58rem;
  background: var(--bg-surface);
  font-size: 0.82rem;
}

.buildkit-signal.present {
  background: var(--ok-soft);
}

.buildkit-signal.missing {
  background: var(--warn-soft);
}

.btn {
  border: 1px solid transparent;
  border-radius: var(--radius-sm);
  padding: 0.52rem 0.76rem;
  cursor: pointer;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition:
    transform var(--motion-fast) var(--ease-standard),
    background var(--motion-fast) var(--ease-standard),
    border-color var(--motion-fast) var(--ease-standard);
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:disabled {
  opacity: 0.58;
  cursor: not-allowed;
  transform: none;
}

.btn-primary {
  background: linear-gradient(145deg, var(--accent), var(--accent-strong));
  color: #f2fffb;
  border-color: color-mix(in srgb, var(--accent-strong) 68%, transparent);
}

.btn-subtle {
  background: var(--bg-surface);
  border-color: var(--border-strong);
  color: var(--text-secondary);
}

.btn-subtle.is-active {
  background: color-mix(in srgb, var(--accent-soft) 70%, var(--bg-surface));
  border-color: var(--accent);
  color: var(--text-primary);
}

.btn-danger {
  background: linear-gradient(145deg, #ca594b, #a73a2f);
  color: #fff8f7;
  border-color: #8f2e24;
}

.footer-note {
  color: var(--text-muted);
  font-size: 0.78rem;
  text-align: right;
  line-height: 1.4;
}

.muted {
  color: var(--text-muted);
}

.empty-state {
  border: 1px dashed var(--border-strong);
  border-radius: var(--radius-sm);
  background: var(--bg-subtle);
  padding: var(--space-3);
  color: var(--text-secondary);
  font-size: 0.86rem;
  line-height: 1.45;
}

.is-hidden {
  display: none !important;
}

.modal {
  position: fixed;
  inset: 0;
  z-index: 40;
  display: grid;
  place-items: center;
  padding: var(--space-3);
}

.modal.is-hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  inset: 0;
  border: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: rgba(10, 18, 16, 0.58);
  cursor: pointer;
}

.modal-card {
  position: relative;
  width: min(760px, calc(100vw - 1.2rem));
  max-height: calc(100vh - 1.2rem);
  overflow: auto;
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  box-shadow: var(--shadow-card);
}

.modal-card-danger {
  width: min(560px, calc(100vw - 1.2rem));
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.modal-form {
  padding-top: var(--space-1);
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-1);
}

.delete-warning {
  border: 1px solid color-mix(in srgb, #d66658 50%, var(--border-soft));
  background: var(--danger-soft);
  border-radius: var(--radius-sm);
  padding: var(--space-2);
  display: grid;
  gap: var(--space-1);
  margin-bottom: var(--space-2);
}

.delete-warning-title {
  font-weight: 700;
  color: #9f3a32;
}

.delete-target {
  font-weight: 700;
}

@keyframes stepReveal {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 1060px) {
  .journey,
  .system-strip,
  .workspace,
  .form-grid,
  .advanced-grid,
  .insight-grid {
    grid-template-columns: 1fr;
  }

  .panel-projects {
    position: static;
    max-height: none;
  }

  .footer-note {
    text-align: left;
  }

  .env-card-head {
    grid-template-columns: 1fr;
  }

  .env-var-row {
    grid-template-columns: 1fr;
  }

  .catalog-hero {
    flex-direction: column;
    align-items: flex-start;
  }

  .selected-actions {
    width: 100%;
  }
}

@media (max-width: 680px) {
  .app-shell {
    width: min(100vw - 0.9rem, 1220px);
    margin: var(--space-3) auto var(--space-4);
    gap: var(--space-3);
  }

  .hero {
    padding: var(--space-4);
    gap: var(--space-2);
  }

  .catalog-hero {
    padding: var(--space-3);
  }

  .hero-actions .btn {
    width: 100%;
  }

  .catalog-actions .btn {
    width: 100%;
  }

  .panel {
    padding: var(--space-3);
  }

  .panel-main {
    gap: var(--space-2);
  }

  .subpanel {
    padding: var(--space-2);
  }

  .modal {
    padding: var(--space-2);
  }

  .modal-card {
    padding: var(--space-2);
  }

  .status-banner {
    padding: 0.56rem 0.7rem;
  }

  .journey-card {
    padding: var(--space-3);
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 1ms !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}
